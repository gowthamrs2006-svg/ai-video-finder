<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>GM Video Finder AI</title>
<meta name="description" content="Search one word and find videos from multiple platforms">

<link rel="manifest" href="manifest.json">
<link rel="icon" href="gm-icon.svg" type="image/svg+xml">
<meta name="theme-color" content="#111111" id="themeColorMeta">

<style>
:root{
  color-scheme: light;
  --bg0:#f7f7fb;
  --bg1:#eef2ff;
  --surface: rgba(255,255,255,.75);
  --surface2: rgba(255,255,255,.92);
  --border: rgba(15,23,42,.10);
  --text:#0f172a;
  --muted:#475569;
  --primary:#6366f1;
  --primary2:#22c55e;
  --shadow: 0 16px 50px rgba(2,6,23,.10);
  --ring: 0 0 0 4px rgba(99,102,241,.18);
  --chip: rgba(99,102,241,.10);
}

html[data-theme="dark"]{
  color-scheme: dark;
  --bg0:#070A12;
  --bg1:#0B1024;
  --surface: rgba(17,24,39,.55);
  --surface2: rgba(17,24,39,.85);
  --border: rgba(148,163,184,.16);
  --text:#E6EAF2;
  --muted:#9AA3B2;
  --primary:#7c83ff;
  --primary2:#2ee59d;
  --shadow: 0 18px 60px rgba(0,0,0,.35);
  --ring: 0 0 0 4px rgba(124,131,255,.22);
  --chip: rgba(124,131,255,.14);
}

*{ box-sizing: border-box; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
  color: var(--text);
  min-height:100vh;
  background:
    radial-gradient(900px 450px at 15% 10%, rgba(99,102,241,.25), transparent 55%),
    radial-gradient(800px 420px at 90% 20%, rgba(34,197,94,.18), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
  padding: 28px 16px 42px;
}

.wrap{
  width: min(980px, 100%);
  margin: 0 auto;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 18px;
}

.brand{
  display:flex;
  align-items:center;
  gap: 12px;
  user-select:none;
}

.logo{
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display:grid;
  place-items:center;
  background: linear-gradient(135deg, rgba(99,102,241,.95), rgba(34,197,94,.85));
  box-shadow: var(--shadow);
  border: 1px solid rgba(255,255,255,.18);
}

.logo span{
  font-weight: 900;
  letter-spacing: -0.02em;
  color:white;
}

h1{
  margin:0;
  font-size: 20px;
  letter-spacing: -0.02em;
}
.subtitle{
  margin:0;
  color: var(--muted);
  font-size: 13px;
}

.toolbar{
  display:flex;
  gap: 10px;
  align-items:center;
}

.btn{
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  cursor: pointer;
  transition: transform .12s ease, background .12s ease, border-color .12s ease, opacity .12s ease;
  backdrop-filter: blur(10px);
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(99,102,241,.35); }
.btn:active{ transform: translateY(0px); opacity:.9; }
.btn:focus{ outline:none; box-shadow: var(--ring); }

.btn.primary{
  background: linear-gradient(135deg, var(--primary), var(--primary2));
  color: white;
  border-color: rgba(255,255,255,.18);
}

.card{
  border: 1px solid var(--border);
  background: var(--surface);
  border-radius: 18px;
  padding: 16px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
}

.searchRow{
  display:flex;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.input{
  flex: 1 1 320px;
  min-width: 260px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text);
  font-size: 15px;
  outline:none;
  transition: box-shadow .12s ease, border-color .12s ease;
}
.input:focus{ box-shadow: var(--ring); border-color: rgba(99,102,241,.45); }

.hint{
  margin-top: 10px;
  color: var(--muted);
  font-size: 13px;
  display:flex;
  gap: 10px;
  align-items:center;
  flex-wrap: wrap;
}

.chips{
  display:flex;
  flex-wrap: wrap;
  gap: 8px;
}
.chip{
  border: 1px solid var(--border);
  background: var(--chip);
  color: var(--text);
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 13px;
  cursor: pointer;
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}
.chip:hover{ transform: translateY(-1px); border-color: rgba(99,102,241,.35); }

.sectionTitle{
  margin: 18px 2px 10px;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
}
.sectionTitle h2{
  margin:0;
  font-size: 14px;
  letter-spacing: .02em;
  text-transform: uppercase;
  color: var(--muted);
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}
@media (max-width: 840px){
  .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 520px){
  .grid{ grid-template-columns: 1fr; }
}

.linkCard{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 10px;
  padding: 12px 12px;
  border-radius: 16px;
  border: 1px solid var(--border);
  background: var(--surface2);
  color: var(--text);
  text-decoration:none;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}
.linkCard:hover{ transform: translateY(-1px); border-color: rgba(99,102,241,.35); }

.linkMeta{
  display:flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}
.linkName{
  font-weight: 700;
  letter-spacing: -0.01em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.linkDesc{
  font-size: 12px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.pill{
  flex: 0 0 auto;
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(2,6,23,.06);
}
html[data-theme="dark"] .pill{
  background: rgba(226,232,240,.08);
}

.footer{
  margin-top: 14px;
  color: var(--muted);
  font-size: 12px;
  display:flex;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;
}
.kbd{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  border: 1px solid var(--border);
  border-bottom-width: 2px;
  background: var(--surface);
  padding: 2px 6px;
  border-radius: 8px;
}
</style>
</head>

<body>

<div class="wrap">
  <div class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true"><span>GM</span></div>
      <div>
        <h1>GM Video Finder AI</h1>
        <p class="subtitle">Search once. Jump to videos across your favorite platforms.</p>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn" id="themeToggle" type="button" title="Toggle theme">Theme</button>
      <button class="btn" id="shareBtn" type="button" title="Copy a shareable link">Share</button>
    </div>
  </div>

  <div class="card" role="search">
    <div class="searchRow">
      <input class="input" id="query" placeholder="Type a keyword (e.g., cricket, cooking, AI)" autocomplete="off" inputmode="search">
      <button class="btn primary" id="searchBtn" type="button">Search</button>
      <button class="btn" id="clearBtn" type="button">Clear</button>
    </div>

    <div class="hint">
      <span>Tip: press <span class="kbd">Enter</span> to search.</span>
      <div class="chips" id="recentChips" aria-label="Recent searches"></div>
    </div>
  </div>

  <div class="sectionTitle">
    <h2>Results</h2>
    <div class="chips" id="categoryChips" aria-label="Category filters"></div>
  </div>

  <div class="grid" id="results" aria-live="polite"></div>

  <div class="footer">
    <span>Opens results in new tabs (safe links only).</span>
    <span id="swStatus"></span>
  </div>
</div>

<script>
const STORAGE_KEYS = {
  theme: "gm_theme",
  recent: "gm_recent_searches"
};

const els = {
  query: document.getElementById("query"),
  searchBtn: document.getElementById("searchBtn"),
  clearBtn: document.getElementById("clearBtn"),
  results: document.getElementById("results"),
  themeToggle: document.getElementById("themeToggle"),
  shareBtn: document.getElementById("shareBtn"),
  recentChips: document.getElementById("recentChips"),
  categoryChips: document.getElementById("categoryChips"),
  themeColorMeta: document.getElementById("themeColorMeta"),
  swStatus: document.getElementById("swStatus")
};

function getTheme(){
  const saved = localStorage.getItem(STORAGE_KEYS.theme);
  if (saved === "dark" || saved === "light") return saved;
  return window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
}

function applyTheme(theme){
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem(STORAGE_KEYS.theme, theme);
  els.themeColorMeta.setAttribute("content", theme === "dark" ? "#070A12" : "#111111");
  els.themeToggle.textContent = theme === "dark" ? "Dark" : "Light";
}

function getRecent(){
  try{
    const raw = localStorage.getItem(STORAGE_KEYS.recent) || "[]";
    const arr = JSON.parse(raw);
    return Array.isArray(arr) ? arr.filter(x => typeof x === "string") : [];
  }catch{
    return [];
  }
}

function setRecent(items){
  localStorage.setItem(STORAGE_KEYS.recent, JSON.stringify(items.slice(0, 8)));
}

function addRecent(q){
  const cleaned = q.trim();
  if (!cleaned) return;
  const prev = getRecent();
  const next = [cleaned, ...prev.filter(x => x.toLowerCase() !== cleaned.toLowerCase())];
  setRecent(next);
  renderRecent();
}

function renderRecent(){
  const items = getRecent();
  els.recentChips.innerHTML = "";
  items.forEach(q => {
    const b = document.createElement("button");
    b.type = "button";
    b.className = "chip";
    b.textContent = q;
    b.title = "Search again";
    b.addEventListener("click", () => {
      els.query.value = q;
      runSearch();
    });
    els.recentChips.appendChild(b);
  });
}

const CATEGORIES = [
  { id: "all", label: "All" },
  { id: "video", label: "Video" },
  { id: "shorts", label: "Shorts" },
  { id: "social", label: "Social" },
  { id: "search", label: "Search" }
];

let activeCategory = "all";

function renderCategories(){
  els.categoryChips.innerHTML = "";
  CATEGORIES.forEach(c => {
    const b = document.createElement("button");
    b.type = "button";
    b.className = "chip";
    b.textContent = c.label;
    if (c.id === activeCategory) b.style.borderColor = "rgba(99,102,241,.55)";
    b.addEventListener("click", () => {
      activeCategory = c.id;
      renderCategories();
      runSearch(false);
    });
    els.categoryChips.appendChild(b);
  });
}

function buildLinks(q){
  const e = encodeURIComponent(q);
  const g = encodeURIComponent(`"${q}" video`);

  return [
    { name:"YouTube", desc:"Videos + creators", cat:"video", url:`https://www.youtube.com/results?search_query=${e}` },
    { name:"YouTube Shorts", desc:"Quick shorts feed", cat:"shorts", url:`https://www.youtube.com/results?search_query=${encodeURIComponent(q + " #shorts")}` },
    { name:"TikTok", desc:"Trending short videos", cat:"shorts", url:`https://www.tiktok.com/search?q=${e}` },
    { name:"Instagram", desc:"Reels & posts", cat:"social", url:`https://www.instagram.com/explore/search/keyword/?q=${e}` },
    { name:"Facebook Watch", desc:"Watch search", cat:"social", url:`https://www.facebook.com/watch/search/?q=${e}` },
    { name:"X (Twitter)", desc:"Posts & videos", cat:"social", url:`https://x.com/search?q=${e}&src=typed_query` },
    { name:"Reddit", desc:"Communities & clips", cat:"social", url:`https://www.reddit.com/search/?q=${e}` },

    { name:"Vimeo", desc:"High-quality videos", cat:"video", url:`https://vimeo.com/search?q=${e}` },
    { name:"Dailymotion", desc:"Video search", cat:"video", url:`https://www.dailymotion.com/search/${e}/videos` },
    { name:"Twitch", desc:"Channels & clips", cat:"video", url:`https://www.twitch.tv/search?term=${e}` },
    { name:"Rumble", desc:"Video platform", cat:"video", url:`https://rumble.com/search/all?q=${e}` },

    { name:"Google Videos", desc:"Web video results", cat:"search", url:`https://www.google.com/search?tbm=vid&q=${e}` },
    { name:"Google (Web)", desc:"General search", cat:"search", url:`https://www.google.com/search?q=${g}` },
    { name:"ShareChat", desc:"via Google site search", cat:"social", url:`https://www.google.com/search?q=${encodeURIComponent("site:sharechat.com " + q)}` },
    { name:"Pinterest", desc:"Ideas & short videos", cat:"social", url:`https://www.pinterest.com/search/pins/?q=${e}` }
  ];
}

function renderResults(links){
  els.results.innerHTML = "";
  links.forEach(l => {
    const a = document.createElement("a");
    a.className = "linkCard";
    a.href = l.url;
    a.target = "_blank";
    a.rel = "noopener noreferrer";

    const left = document.createElement("div");
    left.className = "linkMeta";

    const name = document.createElement("div");
    name.className = "linkName";
    name.textContent = l.name;

    const desc = document.createElement("div");
    desc.className = "linkDesc";
    desc.textContent = l.desc;

    const pill = document.createElement("div");
    pill.className = "pill";
    pill.textContent = l.cat.toUpperCase();

    left.appendChild(name);
    left.appendChild(desc);
    a.appendChild(left);
    a.appendChild(pill);
    els.results.appendChild(a);
  });
}

function runSearch(saveRecent = true){
  const q = els.query.value.trim();
  if (!q){
    els.results.innerHTML = "";
    return;
  }
  if (saveRecent) addRecent(q);

  const all = buildLinks(q);
  const filtered = activeCategory === "all" ? all : all.filter(x => x.cat === activeCategory);
  renderResults(filtered);
}

function clearAll(){
  els.query.value = "";
  els.results.innerHTML = "";
  els.query.focus();
}

async function share(){
  const q = els.query.value.trim();
  const url = new URL(window.location.href);
  if (q) url.searchParams.set("q", q);
  try{
    await navigator.clipboard.writeText(url.toString());
    els.shareBtn.textContent = "Copied";
    setTimeout(() => (els.shareBtn.textContent = "Share"), 900);
  }catch{
    prompt("Copy link:", url.toString());
  }
}

function bootFromUrl(){
  const url = new URL(window.location.href);
  const q = (url.searchParams.get("q") || "").trim();
  if (q){
    els.query.value = q;
    runSearch(true);
  }
}

// Events
els.searchBtn.addEventListener("click", () => runSearch(true));
els.clearBtn.addEventListener("click", clearAll);
els.query.addEventListener("keydown", (e) => {
  if (e.key === "Enter") runSearch(true);
  if (e.key === "Escape") clearAll();
});
els.themeToggle.addEventListener("click", () => {
  const curr = document.documentElement.getAttribute("data-theme") || "light";
  applyTheme(curr === "dark" ? "light" : "dark");
});
els.shareBtn.addEventListener("click", share);

// Init
applyTheme(getTheme());
renderRecent();
renderCategories();
bootFromUrl();
els.query.focus();

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js").then(() => {
    els.swStatus.textContent = "Offline-ready";
  }).catch(() => {
    els.swStatus.textContent = "";
  });
}
</script>

</body>
</html>
